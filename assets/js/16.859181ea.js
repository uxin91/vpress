(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{290:function(e,t,s){"use strict";s.r(t);var n=s(10),r=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"electron-踩坑记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#electron-踩坑记录"}},[e._v("#")]),e._v(" electron 踩坑记录")]),e._v(" "),t("p",[e._v("可能老是会碰到在渲染进程传值的时候无法进行打印。后来才是发现，原因还是在渲染的窗口中没加 "),t("code",[e._v("webPreferences:{nodeIntegration:true}")]),e._v("导致"),t("code",[e._v("require undefined")]),e._v("。打开调试窗口一看，果然"),t("code",[e._v("cols.webContents.openDevTools()")]),e._v(" "),t("img",{attrs:{src:e.$withBase("/ele1.png")}}),e._v("\n从而导致后面传值失败。此窗口默认启用了节点集成。在电子5.0.0中，默认情况下将禁用节点集成。要准备进行此更改，请在此窗口的webPreferences中设置{nodeIntegration: true}")]),e._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("还是比较建议，在每个新建窗口的同时（创建BrowserWindow对象中），要加上：\nwebPreferences:{nodeIntegration:true}和\nxxxx.webContents.openDevTools() 调试窗口来排错")])]),e._v(" "),t("h3",{attrs:{id:"打包踩坑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包踩坑"}},[e._v("#")]),e._v(" 打包踩坑")]),e._v(" "),t("p",[e._v("老的写法 "),t("code",[e._v('"buildwin": "electron-builder --platform=win --arch=x64"')])]),e._v(" "),t("p",[e._v("新的写法："),t("code",[e._v('"build": "electron-builder --win --x64",')])]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("碰上这个情况：")]),e._v(" "),t("img",{attrs:{src:e.$withBase("/ele4.png")}}),e._v(" "),t("p",[e._v("那就是package.json的默认入口问题了,默认入口是index.js,由于我们程序的入口是main.js，所以要改\n"),t("img",{attrs:{src:e.$withBase("/ele5.png")}}),e._v("\n改完后打包运行才正常\n"),t("img",{attrs:{src:e.$withBase("/ele6.png")}})]),e._v(" "),t("p",[e._v("绿色版的打包配置：")]),e._v(" "),t("blockquote",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('"packagewin": "electron-packager . xx --out=./dist4 --win --x64 --app-version=0.0.1 --electron-version=2.0.0 --icon=./images/wv.ico --overwrite"\n')])])])]),e._v(" "),t("p",[e._v("exe的方式安装：\n不知道是不是也是因为入口的原因还是网的原因，各种失败，网上一堆不靠谱的方法\n"),t("img",{attrs:{src:e.$withBase("/ele3.png")}})]),e._v(" "),t("p",[e._v("我猜可能是网络原因，直接下载好安装包\n"),t("img",{attrs:{src:e.$withBase("/ele8.png")}})]),e._v(" "),t("p",[e._v("然后再把入口的文件改成main.js，后面终于成功了")]),e._v(" "),t("img",{attrs:{src:e.$withBase("/ele9.png")}}),e._v(" "),t("img",{attrs:{src:e.$withBase("/ele10.png")}}),e._v(" "),t("img",{attrs:{src:e.$withBase("/ele7.png")}}),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("但是缺点就是安装包太大，后面再想办法解决吧")])])])}),[],!1,null,null,null);t.default=r.exports}}]);