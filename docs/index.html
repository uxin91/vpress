<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. Taro | 记录 V1.0</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/public/roc.png">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.12e0ab05.css" as="style"><link rel="preload" href="/assets/js/app.4b9f0a6a.js" as="script"><link rel="preload" href="/assets/js/2.2dc7f74a.js" as="script"><link rel="preload" href="/assets/js/9.8b248ae8.js" as="script"><link rel="prefetch" href="/assets/js/10.9cbda4be.js"><link rel="prefetch" href="/assets/js/11.602f6d35.js"><link rel="prefetch" href="/assets/js/12.29fc785f.js"><link rel="prefetch" href="/assets/js/13.836b7877.js"><link rel="prefetch" href="/assets/js/14.5964bedc.js"><link rel="prefetch" href="/assets/js/15.741dfcaf.js"><link rel="prefetch" href="/assets/js/16.859181ea.js"><link rel="prefetch" href="/assets/js/17.ea2ab5b9.js"><link rel="prefetch" href="/assets/js/18.a30b886d.js"><link rel="prefetch" href="/assets/js/19.82560418.js"><link rel="prefetch" href="/assets/js/20.8c2c0626.js"><link rel="prefetch" href="/assets/js/21.8debe47e.js"><link rel="prefetch" href="/assets/js/22.18ad9d9b.js"><link rel="prefetch" href="/assets/js/23.183b6984.js"><link rel="prefetch" href="/assets/js/24.1d0701eb.js"><link rel="prefetch" href="/assets/js/3.3df301be.js"><link rel="prefetch" href="/assets/js/4.81e675e8.js"><link rel="prefetch" href="/assets/js/5.a76c12a1.js"><link rel="prefetch" href="/assets/js/6.5f80c3c1.js"><link rel="prefetch" href="/assets/js/7.d6c07dc4.js"><link rel="prefetch" href="/assets/js/8.16563041.js">
    <link rel="stylesheet" href="/assets/css/0.styles.12e0ab05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./roc.png" alt="记录 V1.0" class="logo"> <span class="site-name can-hide">记录 V1.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  博客首页
</a></div><div class="nav-item"><a href="/shouye/" class="nav-link">
  前端笔记
</a></div><div class="nav-item"><a href="/docs/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  前端文档
</a></div><div class="nav-item"><a href="/globe/" class="nav-link">
  后端PHP
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link">
  运维实施
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  博客首页
</a></div><div class="nav-item"><a href="/shouye/" class="nav-link">
  前端笔记
</a></div><div class="nav-item"><a href="/docs/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  前端文档
</a></div><div class="nav-item"><a href="/globe/" class="nav-link">
  后端PHP
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link">
  运维实施
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/" aria-current="page" class="active sidebar-link">1. Taro</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_1-1-介绍" class="sidebar-link">1.1. 介绍</a></li><li class="sidebar-sub-header"><a href="/docs/#_1-2-注意" class="sidebar-link">1.2. 注意</a></li><li class="sidebar-sub-header"><a href="/docs/#_2-1-安装脚手架工具-tarojs-cli" class="sidebar-link">2.1. 安装脚手架工具@tarojs/cli</a></li><li class="sidebar-sub-header"><a href="/docs/#_2-2-创建项目" class="sidebar-link">2.2. 创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/#_2-3-打包编译" class="sidebar-link">2.3. 打包编译</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_2-3-1-发布" class="sidebar-link">2.3.1. 发布</a></li><li class="sidebar-sub-header"><a href="/docs/#_2-3-2-监控" class="sidebar-link">2.3.2. 监控</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_3-1-基本目录" class="sidebar-link">3.1. 基本目录</a></li><li class="sidebar-sub-header"><a href="/docs/#_3-2-文件命名" class="sidebar-link">3.2. 文件命名</a></li><li class="sidebar-sub-header"><a href="/docs/#_3-3-其他规范" class="sidebar-link">3.3. 其他规范</a></li><li class="sidebar-sub-header"><a href="/docs/#_4-1-微信小程序全局配置" class="sidebar-link">4.1. 微信小程序全局配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_4-1-1-生命周期对应关系" class="sidebar-link">4.1.1. 生命周期对应关系</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_4-2-微信小程序页面配置" class="sidebar-link">4.2. 微信小程序页面配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_4-2-1-生命周期对应关系" class="sidebar-link">4.2.1. 生命周期对应关系</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_4-3-路由功能" class="sidebar-link">4.3. 路由功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_4-3-1-路由-api-说明" class="sidebar-link">4.3.1. 路由 API 说明</a></li><li class="sidebar-sub-header"><a href="/docs/#_4-3-2-路由传参" class="sidebar-link">4.3.2. 路由传参</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_4-4-设计稿及尺寸单位" class="sidebar-link">4.4. 设计稿及尺寸单位</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_4-4-1-注意" class="sidebar-link">4.4.1. 注意</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_5-1-小规范" class="sidebar-link">5.1. 小规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_5-1-1-必须声明-taro-和组件" class="sidebar-link">5.1.1. 必须声明 Taro 和组件</a></li><li class="sidebar-sub-header"><a href="/docs/#_5-1-2-首字母大写与驼峰式命名" class="sidebar-link">5.1.2. 首字母大写与驼峰式命名</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_5-2-组件初体验" class="sidebar-link">5.2. 组件初体验</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_5-2-1-新建组件-helloworld" class="sidebar-link">5.2.1. 新建组件 HelloWorld</a></li><li class="sidebar-sub-header"><a href="/docs/#_5-2-2-使用组件-helloworld" class="sidebar-link">5.2.2. 使用组件 HelloWorld</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_5-3-属性" class="sidebar-link">5.3. 属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_5-3-1-使用-javascript-表达式" class="sidebar-link">5.3.1. 使用 JavaScript 表达式</a></li><li class="sidebar-sub-header"><a href="/docs/#_5-3-2-字符串常量" class="sidebar-link">5.3.2. 字符串常量</a></li><li class="sidebar-sub-header"><a href="/docs/#_5-3-3-默认为-true" class="sidebar-link">5.3.3. 默认为 True</a></li><li class="sidebar-sub-header"><a href="/docs/#_5-3-4-布尔值、null-和-undefined-被忽略" class="sidebar-link">5.3.4. 布尔值、Null 和 Undefined 被忽略</a></li><li class="sidebar-sub-header"><a href="/docs/#_5-3-5-注意" class="sidebar-link">5.3.5. 注意</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_6-1-props" class="sidebar-link">6.1. props</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_6-1-1-新建-person-jsx" class="sidebar-link">6.1.1. 新建 Person.jsx</a></li><li class="sidebar-sub-header"><a href="/docs/#_6-1-2-页面-index-js" class="sidebar-link">6.1.2. 页面 index.js</a></li><li class="sidebar-sub-header"><a href="/docs/#_6-1-3-props-的只读性" class="sidebar-link">6.1.3. Props 的只读性</a></li><li class="sidebar-sub-header"><a href="/docs/#_6-1-4-使用-proptypes-检查类型" class="sidebar-link">6.1.4. 使用 PropTypes 检查类型</a></li><li class="sidebar-sub-header"><a href="/docs/#_6-1-5-props-不能使用-拓展操作符" class="sidebar-link">6.1.5. props 不能使用 ... 拓展操作符</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_6-2-state" class="sidebar-link">6.2. State</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_6-2-1-使用" class="sidebar-link">6.2.1. 使用</a></li><li class="sidebar-sub-header"><a href="/docs/#_6-2-2-状态更新一定是异步的" class="sidebar-link">6.2.2. 状态更新一定是异步的</a></li><li class="sidebar-sub-header"><a href="/docs/#_6-2-3-组件-state-与-props-里字段重名" class="sidebar-link">6.2.3. 组件 state 与 props 里字段重名</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/#_7-1-事件的绑定" class="sidebar-link">7.1. 事件的绑定</a></li><li class="sidebar-sub-header"><a href="/docs/#_7-2-事件触发" class="sidebar-link">7.2. 事件触发</a></li><li class="sidebar-sub-header"><a href="/docs/#_7-3-阻止事件冒泡" class="sidebar-link">7.3. 阻止事件冒泡</a></li><li class="sidebar-sub-header"><a href="/docs/#_7-4-事件传递参数" class="sidebar-link">7.4. 事件传递参数</a></li><li class="sidebar-sub-header"><a href="/docs/#_7-5-事件的传递" class="sidebar-link">7.5. 事件的传递</a></li><li class="sidebar-sub-header"><a href="/docs/#_8-1-元素变量-和-if" class="sidebar-link">8.1. 元素变量 和 if</a></li><li class="sidebar-sub-header"><a href="/docs/#_8-2-逻辑运算符" class="sidebar-link">8.2. 逻辑运算符 &amp;&amp;</a></li><li class="sidebar-sub-header"><a href="/docs/#_8-3-三元运算符" class="sidebar-link">8.3. 三元运算符</a></li><li class="sidebar-sub-header"><a href="/docs/#_9-1-注意" class="sidebar-link">9.1. 注意</a></li><li class="sidebar-sub-header"><a href="/docs/#_10-1-children" class="sidebar-link">10.1. Children</a></li><li class="sidebar-sub-header"><a href="/docs/#_10-2-组合" class="sidebar-link">10.2. 组合</a></li><li class="sidebar-sub-header"><a href="/docs/#_10-3-注意事项" class="sidebar-link">10.3. 注意事项</a></li><li class="sidebar-sub-header"><a href="/docs/#_11-1-外部样式类" class="sidebar-link">11.1. 外部样式类</a></li><li class="sidebar-sub-header"><a href="/docs/#_11-2-全局样式类" class="sidebar-link">11.2. 全局样式类</a></li><li class="sidebar-sub-header"><a href="/docs/#_13-1-最佳实践" class="sidebar-link">13.1. 最佳实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#_13-1-1-关于-jsx-支持程度补充说明" class="sidebar-link">13.1.1 关于 JSX 支持程度补充说明</a></li></ul></li></ul></li><li><a href="/docs/electron-doc.html" class="sidebar-link">electron记录</a></li><li><a href="/docs/webpack-doc.html" class="sidebar-link">webpack从入门到进阶</a></li><li><a href="/docs/type-doc.html" class="sidebar-link">TypeScript</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-taro"><a href="#_1-taro" class="header-anchor">#</a> 1. Taro</h1> <h2 id="_1-1-介绍"><a href="#_1-1-介绍" class="header-anchor">#</a> 1.1. 介绍</h2> <p><a href="https://taro.js.org/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://nervjs.github.io/taro/docs/README.html" target="_blank" rel="noopener noreferrer">开发文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://nervjs.github.io/taro/docs/README.html" target="_blank" rel="noopener noreferrer"><strong>Taro</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一套遵循 <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 语法规范的 <strong>多端开发</strong> 解决方案。由京东的凹凸实验室团队于 2018-09-18 历时 3 个月正式发布。taro 的目标是使用一套代码达到多端统一。</p> <p>多端：</p> <ul><li><p>微信小程序</p></li> <li><p>H5</p></li> <li><p>React Native</p></li> <li><p>支付宝小程序</p></li> <li><p>百度智能小程序</p></li> <li><blockquote><p>快应用 适配中</p></blockquote></li></ul> <h2 id="_1-2-注意"><a href="#_1-2-注意" class="header-anchor">#</a> 1.2. 注意</h2> <p>虽然 Taro 拥有多端编译的能力，但是为了让我们的学习有一条比较完整的路线，本章课程是优先以微信小程序的开发为主线来介绍 Taro。</p> <h1 id="_2-运行项目"><a href="#_2-运行项目" class="header-anchor">#</a> 2. 运行项目</h1> <h2 id="_2-1-安装脚手架工具-tarojs-cli"><a href="#_2-1-安装脚手架工具-tarojs-cli" class="header-anchor">#</a> 2.1. 安装脚手架工具@tarojs/cli</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @tarojs/cli
</code></pre></div><h2 id="_2-2-创建项目"><a href="#_2-2-创建项目" class="header-anchor">#</a> 2.2. 创建项目</h2> <div class="language-sh extra-class"><pre class="language-sh"><code>taro init myApp
</code></pre></div><h2 id="_2-3-打包编译"><a href="#_2-3-打包编译" class="header-anchor">#</a> 2.3. 打包编译</h2> <h3 id="_2-3-1-发布"><a href="#_2-3-1-发布" class="header-anchor">#</a> 2.3.1. 发布</h3> <ul><li><p>微信小程序</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run build:weapp
</code></pre></div></li> <li><p>H5</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run build:h5
</code></pre></div></li> <li><p>百度智能小程序</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run build:swan
</code></pre></div></li> <li><p>支付宝小程序</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run build:alipay
</code></pre></div></li> <li><p>React Native</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run build:rn
</code></pre></div></li></ul> <h3 id="_2-3-2-监控"><a href="#_2-3-2-监控" class="header-anchor">#</a> 2.3.2. 监控</h3> <ul><li><p>微信小程序</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run dev:weapp
</code></pre></div></li> <li><p>H5</p> <div class="language- extra-class"><pre class="language-text"><code>npm run dev:h5
</code></pre></div></li> <li><p>百度智能小程序</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run dev:swan
</code></pre></div></li> <li><p>支付宝小程序</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run dev:alipay
</code></pre></div></li> <li><p>React Native</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run dev:rn
</code></pre></div></li></ul> <h1 id="_3-项目结构"><a href="#_3-项目结构" class="header-anchor">#</a> 3. 项目结构</h1> <h2 id="_3-1-基本目录"><a href="#_3-1-基本目录" class="header-anchor">#</a> 3.1. 基本目录</h2> <p>所有项目源代码请放在项目根目录 <code>src</code> 目录下，项目所需最基本的文件包括 <strong>入口文件</strong> 以及 <strong>页面文件</strong></p> <ul><li>入口文件为 <code>app.js</code></li> <li>页面文件建议放置在 <code>src/pages</code> 目录下</li></ul> <p>一个可靠的 Taro 项目可以按照如下方式进行组织</p> <div class="language- extra-class"><pre class="language-text"><code>├── config                 配置目录
|   ├── dev.js             开发时配置
|   ├── index.js           默认配置
|   └── prod.js            打包时配置
├── src                    源码目录
|   ├── components         公共组件目录
|   ├── pages              页面文件目录
|   |   ├── index          index 页面目录
|   |   |   ├── banner     页面 index 私有组件
|   |   |   ├── index.js   index 页面逻辑
|   |   |   └── index.css  index 页面样式
|   ├── utils              公共方法库
|   ├── app.css            项目总通用样式
|   └── app.js             项目入口文件
└── package.json
</code></pre></div><h2 id="_3-2-文件命名"><a href="#_3-2-文件命名" class="header-anchor">#</a> 3.2. 文件命名</h2> <p>Taro 中普通 JS/TS 文件以小写字母命名，多个单词以下划线连接，例如 <code>util.js</code>、<code>util_helper.js</code></p> <p>Taro 组件文件命名遵循 Pascal 命名法，例如 <code>ReservationCard.jsx</code></p> <h2 id="_3-3-其他规范"><a href="#_3-3-其他规范" class="header-anchor">#</a> 3.3. 其他规范</h2> <p>taro 做了更加详细的编码规范描述。<a href="https://nervjs.github.io/taro/docs/spec-for-taro.html#javascript-%E4%B9%A6%E5%86%99%E8%A7%84%E8%8C%83" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="_4-项目配置"><a href="#_4-项目配置" class="header-anchor">#</a> 4. 项目配置</h1> <p>通过 Taro 模板创建的项目都会默认拥有 <code>project.config.json</code> 这一项目配置文件，这个文件 <strong>只能用于微信小程序</strong>，若要兼容到其他小程序平台，请按如下对应规则来增加相应平台的配置文件，其配置与各自小程序平台要求的一致</p> <p>各类小程序平台均有自己的项目配置文件，例如</p> <ul><li>微信小程序，<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html?search-key=%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">project.config.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>百度智能小程序，<a href="https://smartprogram.baidu.com/docs/develop/devtools/projectconfig/" target="_blank" rel="noopener noreferrer">project.swan.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>头条小程序， project.tt.json，文档暂无，大部分字段与微信小程序一致</li> <li>支付宝小程序，暂无发现</li></ul> <h2 id="_4-1-微信小程序全局配置"><a href="#_4-1-微信小程序全局配置" class="header-anchor">#</a> 4.1. 微信小程序全局配置</h2> <p>小程序的全局配置文件在<code>app.js</code>文件中的 <code>config</code>字段中</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html" target="_blank" rel="noopener noreferrer">小程序全局配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 小程序的全局配置</span>
  config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pages</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pages/index/index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">window</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">backgroundTextStyle</span><span class="token operator">:</span> <span class="token string">'light'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">navigationBarBackgroundColor</span><span class="token operator">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">navigationBarTitleText</span><span class="token operator">:</span> <span class="token string">'WeChat'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">navigationBarTextStyle</span><span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-1-1-生命周期对应关系"><a href="#_4-1-1-生命周期对应关系" class="header-anchor">#</a> 4.1.1. 生命周期对应关系</h3> <p>而且由于入口文件继承自 <code>Component</code> 组件基类，它同样拥有组件生命周期，但因为入口文件的特殊性，他的生命周期并不完整，如下</p> <table><thead><tr><th>生命周期方法</th> <th>作用</th> <th>说明</th></tr></thead> <tbody><tr><td>componentWillMount</td> <td>程序被载入</td> <td>在微信小程序中这一生命周期方法对应 app 的 <code>onLaunch</code></td></tr> <tr><td>componentDidMount</td> <td>程序被载入</td> <td>在微信小程序中这一生命周期方法对应 app 的 <code>onLaunch</code>，在 <code>componentWillMount</code> 后执行</td></tr> <tr><td>componentDidShow</td> <td>程序展示出来</td> <td>在微信小程序中这一生命周期方法对应 <code>onShow</code>，在 H5 中同样实现</td></tr> <tr><td>componentDidHide</td> <td>程序被隐藏</td> <td>在微信小程序中这一生命周期方法对应 <code>onHide</code>，在 H5 中同样实现</td></tr> <tr><td>componentDidCatchError</td> <td>错误监听函数</td> <td>在微信小程序中这一生命周期方法对应 <code>onError</code></td></tr> <tr><td>componentDidNotFound</td> <td>页面不存在监听函数</td> <td>在微信小程序中这一生命周期方法对应 <code>onPageNotFound</code></td></tr></tbody></table> <blockquote><p>微信小程序中 <code>onLaunch</code> 通常带有一个参数 <code>options</code>，在 Taro 中你可以在所有生命周期和普通事件方法中通过 <code>this.$router.params</code> 访问到，在其他端也适用</p></blockquote> <p>入口文件需要包含一个 <code>render</code> 方法，一般返回程序的第一个页面，但值得注意的是不要在入口文件中的 <code>render</code> 方法里写逻辑及引用其他页面、组件，因为编译时 <code>render</code> 方法的内容会被直接替换掉，你的逻辑代码不会起作用。</p> <h2 id="_4-2-微信小程序页面配置"><a href="#_4-2-微信小程序页面配置" class="header-anchor">#</a> 4.2. 微信小程序页面配置</h2> <p>小程序的页面配置文件存在于 <strong>pages</strong>文件夹内的 <code>index.js</code> <code>config</code> 字段中</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">小程序页面配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token keyword">import</span> <span class="token string">'./index.scss'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 页面配置</span>
  config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">navigationBarTitleText</span><span class="token operator">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>Hello world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-2-1-生命周期对应关系"><a href="#_4-2-1-生命周期对应关系" class="header-anchor">#</a> 4.2.1. 生命周期对应关系</h3> <p>由于页面 JS 也继承自 <code>Component</code> 组件基类，所以页面同样拥有生命周期，页面的生命周期方法如下：</p> <table><thead><tr><th>生命周期方法</th> <th>作用</th> <th>说明</th></tr></thead> <tbody><tr><td>componentWillMount</td> <td>页面被载入</td> <td>在微信小程序中这一生命周期方法对应 <code>onLoad</code></td></tr> <tr><td>componentDidMount</td> <td>页面渲染完成</td> <td>在微信小程序中这一生命周期方法对应 <code>onReady</code></td></tr> <tr><td>shouldComponentUpdate</td> <td>页面是否需要更新</td> <td></td></tr> <tr><td>componentWillUpdate</td> <td>页面即将更新</td> <td></td></tr> <tr><td>componentDidUpdate</td> <td>页面更新完毕</td> <td></td></tr> <tr><td>componentWillUnmount</td> <td>页面退出</td> <td>在微信小程序中这一生命周期方法对应 <code>onUnload</code></td></tr> <tr><td>componentDidShow</td> <td>页面展示出来</td> <td>在微信小程序中这一生命周期方法对应 <code>onShow</code>，在 H5 中同样实现</td></tr> <tr><td>componentDidHide</td> <td>页面被隐藏</td> <td>在微信小程序中这一生命周期方法对应 <code>onHide</code>，在 H5 中同样实现</td></tr></tbody></table> <blockquote><p>微信小程序中 <code>onLoad</code> 通常带有一个参数 <code>options</code>，在 Taro 中你可以在所有生命周期和普通事件方法中通过 <code>this.$router.params</code> 访问到，在其他端也适用</p></blockquote> <p>在小程序中，页面还有在一些专属的方法成员，如下</p> <table><thead><tr><th>方法</th> <th>作用</th></tr></thead> <tbody><tr><td>onPullDownRefresh</td> <td>页面相关事件处理函数--监听用户下拉动作</td></tr> <tr><td>onReachBottom</td> <td>页面上拉触底事件的处理函数</td></tr> <tr><td>onShareAppMessage</td> <td>用户点击右上角转发</td></tr> <tr><td>onPageScroll</td> <td>页面滚动触发事件的处理函数</td></tr> <tr><td>onTabItemTap</td> <td>当前是 tab 页时，点击 tab 时触发</td></tr> <tr><td>componentWillPreload</td> <td><a href="https://nervjs.github.io/taro/docs/best-practice.html#%E9%A2%84%E5%8A%A0%E8%BD%BD" target="_blank" rel="noopener noreferrer">预加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，只在<strong>微信小程序</strong>中可用</td></tr></tbody></table> <h2 id="_4-3-路由功能"><a href="#_4-3-路由功能" class="header-anchor">#</a> 4.3. 路由功能</h2> <h3 id="_4-3-1-路由-api-说明"><a href="#_4-3-1-路由-api-说明" class="header-anchor">#</a> 4.3.1. 路由 API 说明</h3> <p>在 <strong>Taro</strong> 中，路由功能是默认自带的，不需要开发者进行额外的路由配置。</p> <p>我们只需要在入口文件的 <code>config</code> 配置中指定好 <code>pages</code>，然后就可以在代码中通过 <strong>Taro</strong> 提供的 API 来跳转到目的页面，例如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 跳转到目的页面，打开新页面</span>
Taro<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/page/path/name'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>具体 API 说明，请查看<a href="https://nervjs.github.io/taro/docs/native-api.html#%E5%AF%BC%E8%88%AA" target="_blank" rel="noopener noreferrer">导航<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>部分说明。</p> <h3 id="_4-3-2-路由传参"><a href="#_4-3-2-路由传参" class="header-anchor">#</a> 4.3.2. 路由传参</h3> <p>我们可以通过在所有跳转的 <code>url</code> 后面添加查询字符串参数进行跳转传参，例如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 传入参数 id=2&amp;type=test</span>
Taro<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/page/path/name?id=2&amp;type=test'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样的话，在跳转成功的目标页的<strong>生命周期</strong>方法里就能通过 <code>this.$router.params</code> 获取到传入的参数，例如上述跳转，在目标页的 <code>componentWillMount</code> 生命周期里获取入参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">Taro<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span>params<span class="token punctuation">)</span> <span class="token comment">// 输出 { id: 2, type: 'test' }</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-4-设计稿及尺寸单位"><a href="#_4-4-设计稿及尺寸单位" class="header-anchor">#</a> 4.4. 设计稿及尺寸单位</h2> <p>在 Taro 中尺寸单位建议使用 <code>px</code>、 <code>百分比 %</code>，Taro 默认会对所有单位进行转换。</p> <p>Taro 默认以 <code>750px</code> 作为换算尺寸标准，如果设计稿不是以 <code>750px</code> 为标准，则需要在项目配置 <code>config/index.js</code> 中进行设置。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">projectName</span><span class="token operator">:</span> <span class="token string">'myApp'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2018-12-6'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">designWidth</span><span class="token operator">:</span> <span class="token number">750</span><span class="token punctuation">,</span>
  <span class="token literal-property property">deviceRatio</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'640'</span><span class="token operator">:</span> <span class="token number">2.34</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string-property property">'750'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">'828'</span><span class="token operator">:</span> <span class="token number">1.81</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-4-1-注意"><a href="#_4-4-1-注意" class="header-anchor">#</a> 4.4.1. 注意</h3> <h4 id="_4-4-1-1-行内样式无法自动转换"><a href="#_4-4-1-1-行内样式无法自动转换" class="header-anchor">#</a> 4.4.1.1. 行内样式无法自动转换</h4> <p>但是如果是在 JS 中书写了行内样式，那么编译时就无法做替换了，针对这种情况，Taro 提供了 API <code>Taro.pxTransform</code> 来做运行时的尺寸转换。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> fontsize <span class="token operator">=</span> Taro<span class="token punctuation">.</span><span class="token function">pxTransform</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// 小程序：rpx，H5：rem</span>
</code></pre></div><h4 id="_4-4-1-2-忽略转换"><a href="#_4-4-1-2-忽略转换" class="header-anchor">#</a> 4.4.1.2. 忽略转换</h4> <p>默认配置会对所有的 <code>px</code> 单位进行转换，有大写字母的 <code>Px</code> 或 <code>PX</code> 则会被忽略</p> <h1 id="_5-taro-中的-jsx"><a href="#_5-taro-中的-jsx" class="header-anchor">#</a> 5. taro 中的 JSX</h1> <p>在 Taro 中， <code>JSX</code> 是一种看起来很像 XML 的 JavaScript 语法扩展，比起模板语言</p> <p>它具有以下优点：</p> <ol><li>各大编辑器和 IDE 都能提供非常良好的支持；</li> <li>可以做到类型安全，在编译期就能发现错误；</li> <li>提供语义化并且可以移动的标签；</li> <li>背后的社区支持非常强力；</li></ol> <h2 id="_5-1-小规范"><a href="#_5-1-小规范" class="header-anchor">#</a> 5.1. 小规范</h2> <p>为了更好的使用 jsx 实现功能，我们先简单的总结一下 Taro 中的 jsx 的规范。</p> <p>请观察以下代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>Hello World<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-1-1-必须声明-taro-和组件"><a href="#_5-1-1-必须声明-taro-和组件" class="header-anchor">#</a> 5.1.1. 必须声明 <code>Taro</code> 和组件</h3> <ul><li>变量 <code>Taro</code> 也是一个必须引入声明的变量，因为我们在编译期和运行时会依赖这个变量做一些特殊处理。</li> <li>变量 <code>View</code> 看起来并没有被调用，但也必须从 <code>@tarojs/components</code> 中引入声明</li> <li><a href="https://nervjs.github.io/taro/docs/components-desc.html" target="_blank" rel="noopener noreferrer">组件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="_5-1-2-首字母大写与驼峰式命名"><a href="#_5-1-2-首字母大写与驼峰式命名" class="header-anchor">#</a> 5.1.2. 首字母大写与驼峰式命名</h3> <p>在 Taro 中，所有组件都应当首字母大写并且使用大驼峰式命名法（Camel-Case）。</p> <p>如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token comment">// 引入一个自定义组件组件</span>
<span class="token keyword">import</span> HomePage <span class="token keyword">from</span> <span class="token string">'./HomePage'</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>HomePage message<span class="token operator">=</span><span class="token string">&quot;Hello World!&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-2-组件初体验"><a href="#_5-2-组件初体验" class="header-anchor">#</a> 5.2. 组件初体验</h2> <h3 id="_5-2-1-新建组件-helloworld"><a href="#_5-2-1-新建组件-helloworld" class="header-anchor">#</a> 5.2.1. 新建组件 HelloWorld</h3> <p>在<strong>src</strong>目录下，新建组件文件夹<code>components</code> 和 组件 <code>HelloWorld.jsx</code> 或者 <code>HelloWorld.js</code>。 输入内容:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>组件 hello world<span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-2-2-使用组件-helloworld"><a href="#_5-2-2-使用组件-helloworld" class="header-anchor">#</a> 5.2.2. 使用组件 HelloWorld</h3> <p>在 <code>src/pages/index.js</code> 中 ，引入组件并渲染</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'../../components/HelloWorld.jsx'</span>
<span class="token keyword">import</span> <span class="token string">'./index.scss'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">navigationBarTitleText</span><span class="token operator">:</span> <span class="token string">'taro-index'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 要声明构造函数，否则 发布容易失败！</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 显式调用，否则  this.props将会是未定义</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>HelloWorld <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-3-属性"><a href="#_5-3-属性" class="header-anchor">#</a> 5.3. 属性</h2> <p>在 JSX 中有几种不同的方式来指定属性。</p> <h3 id="_5-3-1-使用-javascript-表达式"><a href="#_5-3-1-使用-javascript-表达式" class="header-anchor">#</a> 5.3.1. 使用 JavaScript 表达式</h3> <p>你可以任意地在 JSX 当中使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators#%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener noreferrer">JavaScript 表达式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，在 JSX 当中的表达式要包含在大括号里。例如，在这个 JSX 中：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Text</span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">&quot;</span></span> <span class="token attr-name">1</span> <span class="token attr-name">+</span> <span class="token attr-name">2</span> <span class="token attr-name">+</span> <span class="token attr-name">3</span> <span class="token attr-name">+</span> <span class="token attr-name">4}</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Text</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>if</strong> 语句和 <strong>for</strong> 循环在 JavaScript 中不是表达式，因此它们不能直接在 JSX 中使用。</p> <p>错误的演示:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Text</span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">&quot;</span></span> <span class="token attr-name">if(true)</span> <span class="token attr-name">{</span> <span class="token attr-name">1</span> <span class="token attr-name">}</span> <span class="token attr-name">}</span><span class="token punctuation">&gt;</span></span> 错误演示 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Text</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_5-3-2-字符串常量"><a href="#_5-3-2-字符串常量" class="header-anchor">#</a> 5.3.2. 字符串常量</h3> <p>你可以将字符串常量作为属性值传递。下面这两个 JSX 表达式是等价的：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponent</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello world<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

&lt;MyComponent message={'hello world'} /&gt;
</code></pre></div><h3 id="_5-3-3-默认为-true"><a href="#_5-3-3-默认为-true" class="header-anchor">#</a> 5.3.3. 默认为 True</h3> <p>如果你没有给属性传值，它默认为 true。因此下面两个 JSX 是等价的：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyTextBox</span> <span class="token attr-name">autocomplete</span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyTextBox</span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{true}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_5-3-4-布尔值、null-和-undefined-被忽略"><a href="#_5-3-4-布尔值、null-和-undefined-被忽略" class="header-anchor">#</a> 5.3.4. 布尔值、Null 和 Undefined 被忽略</h3> <p>false、null、undefined 和 true 都是有效的 children，但它们不会直接被渲染。下面的表达式是等价的：</p> <blockquote><p>在小程序中，true 和 false 是会直接编译出来的</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>View</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span><span class="token punctuation">&gt;</span></span>{false}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>View</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span><span class="token punctuation">&gt;</span></span>{null}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>View</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span><span class="token punctuation">&gt;</span></span>{undefined}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>View</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span><span class="token punctuation">&gt;</span></span>{true}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>View</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这在根据条件来确定是否渲染 元素时非常有用。以下的 JSX 只会在 showHeader 为 true 时渲染</p> <p>组件。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span><span class="token punctuation">&gt;</span></span>
  {showHeader &amp;&amp;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token punctuation">/&gt;</span></span>
  }
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>content</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>View</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_5-3-5-注意"><a href="#_5-3-5-注意" class="header-anchor">#</a> 5.3.5. 注意</h3> <p>React 可以使用 <code>...</code> 拓展操作符来传递属性，但在 Taro 中你<strong>不能</strong>这么做。例如：</p> <p><strong>错误的写法</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Plus'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Second'</span> <span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token operator">&lt;</span>Greeting <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>这样的操作会报错。你只能手动地把所有需要引用的 props 写上去:</p> <p><strong>正确的写法</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Greeting firstName<span class="token operator">=</span><span class="token string">&quot;Plus&quot;</span> lastName<span class="token operator">=</span><span class="token string">&quot;Second&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h1 id="_6-props-state"><a href="#_6-props-state" class="header-anchor">#</a> 6. props &amp; state</h1> <h2 id="_6-1-props"><a href="#_6-1-props" class="header-anchor">#</a> 6.1. props</h2> <p>props 含义为属性，属性不可变。</p> <p>当我们需要在父组件上传递数据给子组件时，可以使用<code>props</code> 技术。</p> <h3 id="_6-1-1-新建-person-jsx"><a href="#_6-1-1-新建-person-jsx" class="header-anchor">#</a> 6.1.1. 新建 Person.jsx</h3> <p><code>person</code>组件中的 <code>name</code>、<code>height</code>、<code>isMale</code>都是从外部接收的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  显式调用，否则  this.props容易出现未定义</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>height<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>isMale<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-1-2-页面-index-js"><a href="#_6-1-2-页面-index-js" class="header-anchor">#</a> 6.1.2. 页面 index.js</h3> <p>在页面<code>index.js</code>中，通过属性的方式动态给 Person 传入不同的 <code>name</code>、<code>height</code>、<code>gender</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token keyword">import</span> Person <span class="token keyword">from</span> <span class="token string">'../../components/Person.jsx'</span>
<span class="token keyword">import</span> <span class="token string">'./index.scss'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">navigationBarTitleText</span><span class="token operator">:</span> <span class="token string">'taro-index'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;小红&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;150&quot;</span> isMale<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;小蓝&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;250&quot;</span> isMale<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-1-3-props-的只读性"><a href="#_6-1-3-props-的只读性" class="header-anchor">#</a> 6.1.3. Props 的只读性</h3> <p>为了规范而定，在组件中，是不能修改传入的<code>props</code>属性的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 不要修改</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'大白'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    <span class="token operator">...</span>
 <span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-1-4-使用-proptypes-检查类型"><a href="#_6-1-4-使用-proptypes-检查类型" class="header-anchor">#</a> 6.1.4. 使用 PropTypes 检查类型</h3> <p>随着应用日渐庞大，你可以通过类型检查捕获大量错误。要检查组件的属性，你需要配置特殊的 <code>propTypes</code> 属性：</p> <blockquote><p><em>目前在小程序端还有些问题</em>，但在 H5 端可以使用，用法和在 React 里一样。 更多可参照<a href="https://reactjs.org.cn/doc/typechecking-with-proptypes.html" target="_blank" rel="noopener noreferrer">React 的相关文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token comment">// 引入 propTypes</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'大白'</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;fz&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>height<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>isMale<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 约束类型</span>
Person<span class="token punctuation">.</span>PropTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
  <span class="token literal-property property">isMale</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-1-5-props-不能使用-拓展操作符"><a href="#_6-1-5-props-不能使用-拓展操作符" class="header-anchor">#</a> 6.1.5. props 不能使用 <code>...</code> 拓展操作符</h3> <p>React 可以使用 <code>...</code> 拓展操作符来传递属性，但在 Taro 中你不能这么做。例如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Plus'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Second'</span> <span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token operator">&lt;</span>Greeting <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>这样的操作会报错。你只能手动地把所有需要引用的 props 写上去：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Greeting firstName<span class="token operator">=</span><span class="token string">&quot;Plus&quot;</span> lastName<span class="token operator">=</span><span class="token string">&quot;Second&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="_6-2-state"><a href="#_6-2-state" class="header-anchor">#</a> 6.2. State</h2> <p>state 含义为<strong>状态</strong>，状态可变。</p> <p>当组件需要实现动态修改某些数据时，可以通过 <code>state</code>来实现。</p> <h3 id="_6-2-1-使用"><a href="#_6-2-1-使用" class="header-anchor">#</a> 6.2.1. 使用</h3> <p>一般是在组件的构造函数中进行初始化，然后就可以在组件的标签中进行使用。</p> <ul><li>初始化 <code>this.state={msg:'hello'}</code></li> <li>修改值 <code>this.setState({msg:'world'})</code></li> <li>标签中使用 <code>&lt;View&gt;{this.state.msg}&lt;/View&gt;</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 声明</span>
<span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">// 初始化</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 修改</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-2-2-状态更新一定是异步的"><a href="#_6-2-2-状态更新一定是异步的" class="header-anchor">#</a> 6.2.2. 状态更新一定是异步的</h3> <p>React 的 <code>setState</code> 不一定总是异步的。而对于 Taro 而言，<code>setState</code>一定是异步的。如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化 count为 0</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 修改 count 为1</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 打印count的值 为 0</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>如想要顺利的拿到修改后的值，正确的做法是 在 <code>setState</code> 的第二个参数传入一个 callback：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在这个函数内你可以拿到 setState 之后的值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>区别于 react，下面这种写法也不行。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> prevState<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-2-3-组件-state-与-props-里字段重名"><a href="#_6-2-3-组件-state-与-props-里字段重名" class="header-anchor">#</a> 6.2.3. 组件 <code>state</code> 与 <code>props</code> 里字段重名</h3> <p>不要在 <code>state</code> 与 <code>props</code> 上用同名的字段，因为这些被字段在微信小程序中都会挂在 <code>data</code> 上。</p> <h1 id="_7-事件处理"><a href="#_7-事件处理" class="header-anchor">#</a> 7. 事件处理</h1> <p>Taro 中关于事件的触发有区别于微信小程序。</p> <h2 id="_7-1-事件的绑定"><a href="#_7-1-事件的绑定" class="header-anchor">#</a> 7.1. 事件的绑定</h2> <ul><li><p>Taro 事件绑定属性的命名采用驼峰式写法 并且是<code>on</code>开头</p> <p><strong>如:</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandle<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>点我点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>而微信小程序中 事件的绑定是以 <code>bind</code> 或者 <code>catch</code> 开头，<code>value</code>值 则是一个字符串</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">clickHandle</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>点我点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>事件的处理函数不是字符串，而是一个 jsx 中的函数</p></li> <li><p>可以在事件执行函数中直接使用 this，而不像 React 中需要调用下列代码来传入<code>this</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Taro 中不需要这样</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>clickHandle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clickHandle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>使用<code>stopPropagation</code>来阻止事件冒泡，而不是微信小程序中的<code>catchEvent</code></p></li></ul> <h2 id="_7-2-事件触发"><a href="#_7-2-事件触发" class="header-anchor">#</a> 7.2. 事件触发</h2> <p>Taro 中，事件处理函数要写在和<strong>构造函数</strong>同层级，如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">clickHandle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 事件的逻辑</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-3-阻止事件冒泡"><a href="#_7-3-阻止事件冒泡" class="header-anchor">#</a> 7.3. 阻止事件冒泡</h2> <p>在 Taro 中不能像微信小程序一样 使用 <code>catchEvent</code>阻止事件冒泡，必须在执行事件中调用<code>e.stopPropagation</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">clickHandle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 阻止事件冒泡</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-4-事件传递参数"><a href="#_7-4-事件传递参数" class="header-anchor">#</a> 7.4. 事件传递参数</h2> <p>当我们向事件的处理函数传递参数时，可以使用 <code>bind</code>的方式来传递，同时，事件对象 <code>e</code> 要排在所传递参数的后面。如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Popper</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hello world!'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 你可以通过 bind 传入多个参数</span>
  <span class="token function">preventPop</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> test<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//事件对象 e 要放在最后</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preventPop</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>区别于 React 中的箭头函数传参，Taro 目前不支持如下写法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Popper</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Hello world!'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 你可以通过 bind 传入多个参数</span>
  <span class="token function">preventPop</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> test<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//事件对象 e 要放在最后</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Taro不支持</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preventPop</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-5-事件的传递"><a href="#_7-5-事件的传递" class="header-anchor">#</a> 7.5. 事件的传递</h2> <p>事件的传递，其实就是 子组件触发父组件中的事件，并且可以传递对应的参数的过程。</p> <blockquote><p>需要注意的是 任何组件的事件传递都要以 <code>on</code> 开头</p></blockquote> <p><strong>组件 IndexComA</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>

<span class="token keyword">class</span> <span class="token class-name">IndexComA</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'IndexComA'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        IndexComA
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>组件 IndexComB</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>

<span class="token keyword">class</span> <span class="token class-name">IndexComB</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'IndexComB'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        IndexComB
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>父组件</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>
<span class="token keyword">import</span> IndexComA <span class="token keyword">from</span> <span class="token string">'../../components/IndexComA'</span>
<span class="token keyword">import</span> IndexComB <span class="token keyword">from</span> <span class="token string">'../../components/IndexComB'</span>
<span class="token keyword">import</span> <span class="token string">'./index.scss'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">navigationBarTitleText</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">clickHd</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件 '</span> <span class="token operator">+</span> arg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>IndexComA onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHd<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>IndexComB onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHd<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_8-条件渲染"><a href="#_8-条件渲染" class="header-anchor">#</a> 8. 条件渲染</h1> <p>在 Taro 中，我们可以使用 <strong>元素变量</strong>， <strong>if</strong>， <strong>三元运算符</strong> ，<strong>逻辑运算符</strong> <code>&amp;&amp;</code>来增加标签的渲染能力。</p> <h2 id="_8-1-元素变量-和-if"><a href="#_8-1-元素变量-和-if" class="header-anchor">#</a> 8.1. 元素变量 和 if</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// LoginStatus.js</span>
<span class="token keyword">class</span> <span class="token class-name">LoginStatus</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>isLoggedIn
    <span class="token comment">// 这里最好初始化声明为 `null`，初始化又不赋值的话</span>
    <span class="token comment">// 小程序可能会报警为变量为 undefined</span>
    <span class="token keyword">let</span> status <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      status <span class="token operator">=</span> <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>已登录<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      status <span class="token operator">=</span> <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>未登录<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span>status<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// app.js</span>
<span class="token keyword">import</span> LoginStatus <span class="token keyword">from</span> <span class="token string">'./LoginStatus'</span>

<span class="token comment">// 这样会渲染 `已登录`</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>LoginStatus isLoggedIn<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_8-2-逻辑运算符"><a href="#_8-2-逻辑运算符" class="header-anchor">#</a> 8.2. 逻辑运算符 <code>&amp;&amp;</code></h2> <p>更加方便的渲染方式。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">LoginStatus</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>isLoggedIn

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>isLoggedIn <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>已登录<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token operator">!</span>isLoggedIn <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>未登录<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_8-3-三元运算符"><a href="#_8-3-三元运算符" class="header-anchor">#</a> 8.3. 三元运算符</h2> <p>条件渲染的另一种方法是使用 JavaScript 的条件运算符 <code>condition ? true : false</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">LoginStatus</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>isLoggedIn

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span>isLoggedIn <span class="token operator">?</span> <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>已登录<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>未登录<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_9-列表渲染"><a href="#_9-列表渲染" class="header-anchor">#</a> 9. 列表渲染</h1> <p>在 Taro 中，需要渲染列表时，是通过 javascript 中的<code>map</code>方法进行遍历的。同时也需要指定 <code>key</code>属性</p> <p>如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// [0, 1, 2, ..., 98, 99]</span>
<span class="token keyword">const</span> listItems <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;li&quot;</span><span class="token operator">&gt;</span>
      我是第 <span class="token punctuation">{</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span> 个数字
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_9-1-注意"><a href="#_9-1-注意" class="header-anchor">#</a> 9.1. 注意</h2> <ol><li><p><code>key</code>不会作为参数传递到子组件</p></li> <li><p>不同于<code>React</code> 在<code>Taro</code>中，能把 map 函数生成的模板当做一个数组来处理</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 错误</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">l</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>l<span class="token punctuation">.</span>selected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token punctuation">{</span>l<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>isValidElement<span class="token punctuation">)</span>
</code></pre></div></li></ol> <h1 id="_10-children-与组合"><a href="#_10-children-与组合" class="header-anchor">#</a> 10. Children 与组合</h1> <h2 id="_10-1-children"><a href="#_10-1-children" class="header-anchor">#</a> 10.1. Children</h2> <p>在我们设计组件时，有些组件通常不知道自己的子组件会有什么内容，例如 <code>Sidebar</code> 和 <code>Dialog</code> 这样的容器组件。</p> <p>我们建议在这样的情况使用 <code>this.props.children</code> 来传递子元素：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dialog</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;dialog&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span>Welcome<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;body&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span><span class="token operator">--</span> divider <span class="token operator">--</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样就能允许其它组件在 JSX 中嵌套任意子组件传递给 <code>Dialog</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Dialog<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;dialog-message&quot;</span><span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using Taro<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Dialog<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 <code>&lt;Dialog /&gt;</code> JSX 标签内的任何内容都会作为它的子元素(Children)都会传递到它的组件。</p> <h2 id="_10-2-组合"><a href="#_10-2-组合" class="header-anchor">#</a> 10.2. 组合</h2> <p>有些情况你不仅仅需要只传递一个子组件，可能会需要很多个「占位符」。</p> <p><strong>dialog</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dialog</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;dialog&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;header&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>renderHeader<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;body&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;footer&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>renderFooter<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>APP</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Dialog
          renderHeader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;welcome-message&quot;</span><span class="token operator">&gt;</span>Welcome<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span><span class="token punctuation">}</span>
          renderFooter<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Button className<span class="token operator">=</span><span class="token string">&quot;close&quot;</span><span class="token operator">&gt;</span>Close<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;dialog-message&quot;</span><span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using Taro<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Dialog<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_10-3-注意事项"><a href="#_10-3-注意事项" class="header-anchor">#</a> 10.3. 注意事项</h2> <p><strong>请不要对 this.props.children 进行任何操作</strong>。Taro 在小程序中实现这个功能使用的是小程序的 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html" target="_blank" rel="noopener noreferrer"><code>slot</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 功能，也就是说你可以把 <code>this.props.children</code> 理解为 <code>slot</code> 的语法糖，<code>this.props.children</code> 在 Taro 中并不是 React 的 <code>ReactElement</code> 对象，因此形如 <code>this.props.children &amp;&amp; this.props.children</code>、<code>this.props.children[0]</code> 在 Taro 中都是非法的。</p> <p><strong>this.props.children 无法用 defaultProps 设置默认内容</strong>。由于小程序的限制，Taro 也无法知道组件的消费者是否传入内容，所以无法应用默认内容。</p> <p><strong>不能把 this.props.children 分解为变量再使用</strong>。由于普通的 <code>props</code> 有一个确切的值，所以当你把它们分解为变量运行时可以处理，<code>this.props.children</code> 则不能这样操作，你必须显性地把 <code>this.props.children</code> 全部都写完整才能实现它的功能。</p> <p><strong>组件的组合需要遵守 this.props.children 的所有规则</strong>。组合这个功能和 <code>this.props.children</code> 一样是通过 <code>slot</code> 实现的，也就是说 <code>this.props.children</code> 的限制对于组件组合也都同样适用。</p> <p><strong>所有组合都必须用 render 开头，且遵守驼峰式命名法</strong>。和我们的事件规范以 <code>on</code> 开头一样，组件组合使用 <code>render</code> 开头。</p> <p><strong>组合只能传入单个 JSX 元素，不能传入其它任何类型</strong>。当你需要进行一些条件判断或复杂逻辑操作的时候，可以使用一个 <code>Block</code> 元素包裹住，然后在 <code>Block</code> 元素的里面填充其它复杂的逻辑。</p> <h1 id="_11-组件的外部样式和全局样式"><a href="#_11-组件的外部样式和全局样式" class="header-anchor">#</a> 11. 组件的外部样式和全局样式</h1> <p>自定义组件对应的样式文件，<strong>默认</strong>只对该组件内的节点生效。编写组件样式时需要注意</p> <ul><li>组件和引用组件的页面不能使用 id 选择器（<code>#a</code>）、属性选择器（<code>[a]</code>）和标签名选择器，请改用 class 选择器。</li> <li><strong>继承样式，如 font 、 color ，会从组件外（父组件）继承到组件内。但是引用组件时在组件节点上书写的 className 无效。</strong></li></ul> <h2 id="_11-1-外部样式类"><a href="#_11-1-外部样式类" class="header-anchor">#</a> 11.1. 外部样式类</h2> <p>如果想传递样式给引用的自定义组件，直接传递 <code>className</code><strong>不可行</strong></p> <p>需要利用 <code>externalClasses</code> 定义段定义若干个外部样式类</p> <p><strong>CustomComp.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> CustomComp <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> externalClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'my-class'</span><span class="token punctuation">]</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;my-class&quot;</span><span class="token operator">&gt;</span>这段文本的颜色由组件外的 <span class="token keyword">class</span> 决定<span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>MyPage.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> MyPage <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>CustomComp my<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;red-text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_11-2-全局样式类"><a href="#_11-2-全局样式类" class="header-anchor">#</a> 11.2. 全局样式类</h2> <p>使用外部样式类可以让组件使用指定的组件外样式类，如果希望组件外样式类能够完全影响组件内部，可以将组件构造器中的 <code>options.addGlobalClass</code> 字段置为 <code>true</code>。</p> <p><strong>CustomComp.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> CustomComp <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">addGlobalClass</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View className<span class="token operator">=</span><span class="token string">&quot;red-text&quot;</span><span class="token operator">&gt;</span>这段文本的颜色由组件外的 <span class="token keyword">class</span> 决定<span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_12-refs-引用"><a href="#_12-refs-引用" class="header-anchor">#</a> 12. <a href="https://nervjs.github.io/taro/docs/ref.html" target="_blank" rel="noopener noreferrer">Refs 引用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h1> <p>该知识点主要应用在 h5 端，如可以直接操作到对应的 dom 元素，动态设置焦点等。在微信小程序中并没有太多的使用场景。因此省略。</p> <h1 id="_13-其他"><a href="#_13-其他" class="header-anchor">#</a> 13 其他</h1> <h2 id="_13-1-最佳实践"><a href="#_13-1-最佳实践" class="header-anchor">#</a> 13.1. <a href="https://nervjs.github.io/taro/docs/best-practice.html" target="_blank" rel="noopener noreferrer">最佳实践<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <h3 id="_13-1-1-关于-jsx-支持程度补充说明"><a href="#_13-1-1-关于-jsx-支持程度补充说明" class="header-anchor">#</a> 13.1.1 关于 JSX 支持程度补充说明</h3> <p>由于 JSX 中的写法千变万化，我们不能支持到所有的 JSX 写法，同时由于微信小程序端的限制，也有部分 JSX 的优秀用法暂时不能得到很好地支持，特在此补充说明一下对于 JSX 的支持程度</p> <ul><li><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/if-statement-in-map-loop.md" target="_blank" rel="noopener noreferrer">不能在包含 JSX 元素的 map 循环中使用 if 表达式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/manipulate-jsx-as-array.md" target="_blank" rel="noopener noreferrer">不能使用 Array#map 之外的方法操作 JSX 数组<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-anonymous-function-in-props.md" target="_blank" rel="noopener noreferrer">不能在 JSX 参数中使用匿名函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-jsx-in-class-method.md" target="_blank" rel="noopener noreferrer">暂不支持在 render() 之外的方法定义 JSX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-spread-in-props.md" target="_blank" rel="noopener noreferrer">不能在 JSX 参数中使用对象展开符<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/NervJS/taro/blob/master/packages/eslint-plugin-taro/docs/no-stateless-function.md" target="_blank" rel="noopener noreferrer">不支持无状态组件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>.....................................................................................</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/electron-doc.html">
        electron记录
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4b9f0a6a.js" defer></script><script src="/assets/js/2.2dc7f74a.js" defer></script><script src="/assets/js/9.8b248ae8.js" defer></script>
  </body>
</html>
